# Rust入門
- [この資料](https://speakerdeck.com/helloyuk13/rusthanzuon-at-rust-ca-1-day-youth-boot-camp)を参考に基本を覚えていく

# ここから先は勉強したことのメモ

## いきなり動かなくて泣いた
- [Montereyにあげた後はxcode-select installを再度叩いておく必要があるっぽい](https://qiita.com/ka2kama/items/f1ad9dd878d152d69472)
- ↑で無事動いた

## 1日目開発(hello_rustディレクトリ / P.62まで)
- エディタ上でGUIでrunできるの便利すぎてずるい
- &普段あんまり使わなさすぎて迷子になる
- Rustにおいてはletでもイミュータブルらしい
- printlnは`{}`が変数を代入するプレースホルダらしい。Cの`%s`みたいなもんか
  - なんか結構いろんな使い方ができるみたい。[公式ドキュメントのprintの項](https://doc.rust-lang.org/rust-by-example/hello/print.html)に色々書いてある
    - width指定は面白い。テーブル作るのめちゃくちゃ楽になりそう。jsにも欲しい。
  - print動かしてるだけでこんな楽しいの久しぶり🦀

### 資料 P.50らへん、文字列型の話
- Stringと&strは違う
  - Stringはリサイズ可能でミュータブル
  - &strはイミュータブル
- だいたいミュータブルにしたいかどうかで選べばOKっぽい
- 違いとしてはメモリの確保方法。&strは厳密に最初の宣言文しか確保しないが、Stringはちょっと余分にとる。メモリ的には&strのが節約になる。はず。
- 相互に変換はできるので、必要になるまではイミュータブルにしておくのもアリだろうか


## 2日目開発(fizzbuzzディレクトリ / P.63 ~ P.77 )
- Rust三項演算子ないみたいやった！すてき！その姿勢がすてき！
  - 正直三項演算子を使わないためにif文だけの関数とか書くから、私はしっくりくる書き方に常に倒せて嬉しい
- `0..100`でPythonにおける`range(100)`と同じになるのね
  - 実際range使うシーンってFEだとあんまないけど、あるとありがたい気持ち
- `{}`で囲ってあっても、`;`なければそれが末尾の文と判断するので`return`なくてもいいらしい
  - `;`つけて`return`してもいいらしい。
  - 個人的には`return`省略を許容しないルールを導入したいな。末尾の`;`有無で`return`かどうかを判断するのは人類にはむずかしいとおもう！
- P.71~ やべー！関数型プログラミング何もわからん。
  - foldはjsでいうとreduceかな？
  - 関数型の方がじゃっかん最適化がききやすい、って程度なので、手続型でかいてもいいらしい。
  - でもどこかでしっかり履修したいな関数型プログラミング
- キリもいいのでここまで。

## 3日目開発(catディレクトリ / P.78 ~ P. 98)
- パターンマッチ面白いかも。簡素なswitchっぽい？

- Result型（enumの一種らしい）
  - Ok(content), Err(reason)はOk.getContent(), Err.getReason()みたいな感じで覚えていい…のか…？
    - ともあれ、content / reasonのように第一引数？に理由が代入されるらしい。アロー関数っぽいものと理解したらいいかな？
- Ok/Errを後でハンドリングしたい場合は末尾に`?`をつければいいらしい
  - そもそもResult型がmatchの引数になるときは、OkとErrがペアにならないとコンパイル通らないみたい。
  - then/catchよりも明示的でいいかも。Goもthrowできないけど、throwできない系の流れはイイね。
```rust
  match read_to_string(path) {
    Ok(content) => print!("{}", content),
    Err(reason) => println!("{}", reason),
  }
```

- Some/Noneはこんな感じ。
```rust 
  match std::env::args().nth(1) {
    Some(path) => run_cat(path),
    None => println!("No path is specified!"),
  }
```

- あたいがある場合だけ処理したい、はこんな感じにできるらしい。
```rust
  if let Some(path) = std::env::args().nth(1) {
    run_cat(path);
  }
```

- 数値型。文字列型でも似たようなものが書ける
```rust
  match x {
    1 => println!("one"),
    2 => println!("two"),
    3 => println!("three"),
    // これはその他
    _ => println!("anything"),
  }
```

- nthってCSS以外ではじめてみるけど何の意味がググったら『N番目』って言われました。12thのthだった。

## 4日目開発(grepディレクトリ / P.98 ~ P. 127)
- 構造体に実装を追加できる。Javaにおける抽象クラスっぽさがある
- selfをつけるとインスタンスメソッド、selfをつけなければstaticメソッド。わかりやすい
- クレートの追加ってこんなpackage.jsonに手書きみたいな感じでええんか
  - でも管理としてはこっちの方が正解な気はする
- structopt便利すぎん？？pythonにもこういうのあるのかな。ビルドしないからないか。

## 5日目開発(grepディレクトリ / P.128 ~ P. 161)
- 所有権の概念面白くて好き
  - 関数に渡すが本当に『渡す』という意味で、渡した後は向こうで厳正に処分してくれる
  - 処分されないようにするためには『参照権限だけ渡す』ようにしないといけない。面白い。確かにこれはメモリ解放捗りそう
- rayonの簡単に並列処理できるようにするのすごいな
- 金土日で演習やっていったん終わりにしようかな
  - これを自分ですらすら書ける境地はちょっと遠そうだけど、まあ何事も最初はそんなもんだよね

## 6日目開発(grepディレクトリ / p.162)
- 行番号を表示するコマンドを実装。案外サクっとできた
- 行番号を取得するためにはfor文のindexがとれればいいのでindexのとりかたを検索
  - pythonと同じく[イテレータをemanurateすることでindexがとれるようになる](https://webbibouroku.com/Blog/Article/rust-iter-index)
- -nオプションは[structoptの公式でshortをつければいいみたいな記載がある](https://docs.rs/structopt/latest/structopt/)のでつけてみたらできた
- とりあえずハンズオンはここで終わり。この後は記事をかくための実験をちょっといたす

# 実験(exprディレクトリ)
## 参照渡ししたやつは編集できるのか？
- 普通に考えるとできんはずである
  - ifですら参照でなく参照外しを求められるので、できなさそうな気がする
- プリミティブ型は勝手に参照渡しになるようだ
- ミュータブルなものを参照渡しできるようにするのが初心者にはかなり高難度クエストだったので『おそらく無理』という結論に
- 逆に『イミュータブルなものをミュータブルで渡すことができる』謎
  - 『親ではイミュータブルだったけど、所有権を渡したのであとは好きにしてくれてかまわん』ということだろうか
- 面白いけど、ちゃんとしっかり理解できるまで時間かかりそうだRust…
  - 今回の勉強はここまで。所有権のはなしは自分なりで整理してまとめて記事にしようと思う